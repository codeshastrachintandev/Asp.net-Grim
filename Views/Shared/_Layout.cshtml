<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="https://172.16.1.69/img/logo.ad88c674.png">
    <title>@ViewData["Title"]Grim</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/GrimLogin.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Login.css" asp-append-version="true" />

    <!--Bootstrap cdn-->

    @* <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> *@


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link href='https://fonts.googleapis.com/css?family=Lato:300,400|Montserrat:700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>


    <!--Google icon cdn -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    @* <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@40,400,1,0" /> *@
    <!--Local css-->

    @* toastr  css*@
    <link rel="stylesheet" type="text/css" href="~/assets/toastr/toastr.min.css">

    <link rel="stylesheet" type="text/css" href="~/css/section.css">
    <link rel="stylesheet" type="text/css" href="~/assets/toastr/toastr.min.css">
    <link rel="stylesheet" type="text/css" href="~/css/badge_notifiction.css">
    <link rel="stylesheet" type="text/css" href="~/css/Cart.css">
    <link rel="stylesheet" type="text/css" href="~/css/common.css">
    @* <link rel="stylesheet" type="text/css" href="~/css/NewIndent.css"> *@
    @* <link rel="stylesheet" type="text/css" href="~/css/sidebarandheader.css"> *@
</head>
<body>

    @* sidebar menu   class="toggled"*@
    <div id="wrapper">
         <!-- sidebar start -->
            <aside id="sidebar-wrapper">
            <div class="sidebar-brand">
                 <a class="nav-link">                    
                    <img src="https://172.16.1.69/img/logo.ad88c674.png">
                    <span><b>GRIM</b></span>
                </a>
            </div>

                <ul class="sidebar-nav" id="sidebar-nav">                   
                @* display all side menu name *@
                </ul> 

            </aside>
        <!-- sidebar end -->

        <!-- header start -->
        <div id="navbar-wrapper">
        <nav class="navbar navbar-inverse">
            <div class="container-fluid nav-container-fluid ">
            <div class="navbar-header">
                <div class="header-inner">
                <div>
                    <a href="#" class="navbar-brand" id="sidebar-toggle"><span class="material-symbols-rounded">menu</span></a>
                </div>
                <div class="header-inner-icon">
                    <div class="position">
                        <div class="notif-badge red" id="notifications_no"></div>
                        <span  data-toggle="modal" data-target="#myModal2" class="material-symbols-rounded">notifications</span>
                    </div>
                    <a href="Cart">
                        <div class="position">
                            <div class="notif-badge green" id="notifications_cart"></div>
                            <a href="Cart"><span class="material-symbols-rounded">shopping_cart</span></a>
                        </div>
                    </a>
                    <div class="position">
                        <span class="material-symbols-rounded">account_circle</span><span id="username"></span>
                    </div>
                </div>
                </div>
            </div>
            </div>
        </nav>
        </div>
        <!-- header end -->
        @RenderBody()
        <!-- Vertically centered modal -->
        <div class="modal-dialog modal-dialog-centered">
        <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
                </div>
            </div>
            </div>
        </div>


    </div>
    @* sidebar menu end *@


<!-- Modal -->
    <div class="modal right fade notification-right-bar" id="myModal2" tabindex="-1" role="dialog"
        aria-labelledby="myModalLabel2">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel2">Notifications</h4>
                </div>

                <div class="modal-body" id="noticationbody">

                </div>

            </div><!-- modal-content -->
        </div><!-- modal-dialog -->
    </div><!-- modal -->

<!-- Button trigger modal -->
    @* <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
  Launch demo modal
</button> *@


<!---------------------------- Order placed Modal start---------------------------->
<div class="modal fade" id="orderPlacedModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true" data-bs-keyboard="false" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">
                    Order Placed    
                </h5>
                <button type="button" class="close" data-dismiss="modal" onclick="popClose('orderPlacedModal')" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h3 id="usernameprint">Hey Indent User</h3>
                <p id="orderid">Your ordetr id:56 is placed and will be delivered from NC09 Centerl Gen Stor</p>
            </div>
            <div class="modal-footer">
                <a href="/NewIndent"><button type="button" asp-controller="Home" asp-action="NewIndent" class="common-button common-blue-button" data-dismiss="modal">Your Next
                    Order</button></a>
                <a href="/MyRequests"><button type="button" asp-controller="Home" asp-action="MyRequests" class="common-button common-green-button">Track Your Order</button></a>
            </div>
        </div>
    </div>
</div>

<!---------------------------- Order placed Modal end---------------------------->


<!-- custom Modal center model yes and no  -->
<div class="modal fade" id="customModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true" data-bs-keyboard="false" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">
                    <span class="material-symbols-rounded">warning</span>
                    Replace Cart Material
                </h5>
                <button type="button" class="close" data-dismiss="modal" onclick="popClose('customModalCenter')" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Your Cart contains materials Do you want to
                    discard the selection and add materials from
                    Central Gen Stor?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="common-button common-red-button" data-dismiss="modal" onclick="popClose('customModalCenter')">No</button>
                <button type="button" class="common-button common-blue-button">Yes</button>
            </div>
        </div>
    </div>
</div>
<!-- custom Modal center model yes and no  -->

    <script src="~/assets/toastr/toastr.min.js"></script>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

    <script src="~/js/main.js"></script>
    <script src="~/js/Home/Home.js"></script>

    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/Logout.js"></script>

    <!-- Jquery CDN Link -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <script type="text/javascript">

        // Check if the screen size matches a mobile device
        var isMobile = window.matchMedia("(max-width: 767px)").matches;

        // Add class if it's a mobile device
        if (isMobile) {
            document.getElementById("sidebar-wrapper").classList.add("toggled");
        }
        const $button = document.querySelector('#sidebar-toggle');
        const $wrapper = document.querySelector('#wrapper');

        $button.addEventListener('click', (e) => {
            e.preventDefault();
            $wrapper.classList.toggle('toggled');
        });
        </script>

    <script>
        document.getElementById("username").innerHTML = Logindata.user[0].first_name + " " + Logindata.user[0].sap_user_id;
        @* console.log("Logindata on master page----->", Logindata); *@
        if (!Logindata) {
            window.location.href = "Login";
        }
       
        var icon;
        var menuOptions = roles_menus[Logindata.user[0].role_id][0];       

        $.each(menuOptions, function(key, value) {
            $.each(icons_list, function(ikey, ivalue) {
                if(ikey==key){icon=ivalue } 
            });
            var $li = $("<li>");
            var $a = $("<a>").attr({
                "asp-action": key,
                "asp-controller": "Home",
                "href": key,
                "class":"Home",
            }).addClass("nav-link").html(`${icon}<span>${value}</span>`);
            $li.append($a);
            $("#sidebar-nav").append($li);
        });
        var $li = $("<li>");
        $b = $("<a>").addClass("nav-link").attr({"onclick":"logout()"}).html(`<span class="material-symbols-rounded">logout</span><span>LogOut</span>`);
        $li.append($b);
        $("#sidebar-nav").append($li);
        
        $(document).on("click", ".Home", function () {
            activeMenuItem = $(this).attr("asp-action");
            localStorage.setItem("sidemenu",activeMenuItem);
        });

        var activeMenuItem = localStorage.getItem("sidemenu");
        if(activeMenuItem==null){
            activeMenuItem = "NewIndent"; 
        }
        // Iterate through the side menu items
        $("#sidebar-nav li").each(function() {
            var menuItem = $(this).find("a").attr("asp-action");
            if (menuItem === activeMenuItem) {
            $(this).addClass("active");
            }
        });        


    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
