<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - GrimLogin</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/GrimLogin.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Login.css" asp-append-version="true" />

    <!--Bootstrap cdn-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Lato:300,400|Montserrat:700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!--Google icon cdn -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
@* <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@40,400,1,0" /> *@
    <!--Local css-->
    <link rel="stylesheet" type="text/css" href="~/css/sidebarandheader.css">
    <link rel="stylesheet" type="text/css" href="~/css/section.css">
    <link rel="stylesheet" type="text/css" href="~/css/badge_notifiction.css">
    <link rel="stylesheet" type="text/css" href="~/css/Cart.css">
</head>
<body>

    @* sidebar menu   class="toggled"*@
    <div id="wrapper"   >
         <!-- sidebar start -->
            <aside id="sidebar-wrapper">
            <div class="sidebar-brand">
                <h2>Logo</h2>
            </div>
          
                <ul class="sidebar-nav" id="sidebar-nav">
                    @* display all side menu name *@
                </ul> 
         
            </aside>
        <!-- sidebar end -->

        <!-- header start -->
        <div id="navbar-wrapper">
        <nav class="navbar navbar-inverse">
            <div class="container-fluid nav-container-fluid ">
            <div class="navbar-header">
                <div class="header-inner">
                <div>
                    <a href="#" class="navbar-brand" id="sidebar-toggle"><span class="material-symbols-rounded">menu</span></a>
                </div>
                <div class="header-inner-icon">
                    <div class="position">
                        <div class="badge red" id="notifications_no"></div>
                        <span class="material-symbols-rounded">notifications</span>
                    </div>
                    <div class="position">
                        <div class="badge green">10</div>
                        <a href="Cart"><span class="material-symbols-rounded">shopping_cart</span></a>
                    </div>
                    <div class="position">
                        <span class="material-symbols-rounded">account_circle</span><span id="username"></span>
                    </div>
                </div>
                </div>
            </div>
            </div>
        </nav>
        </div>
        <!-- header end -->
        @RenderBody()
    </div>
    @* sidebar menu end *@


    <script src="~/js/main.js"></script>


    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/Logout.js"></script>

    <script src="~/js/Home/Home.js"></script>
    <!-- Jquery CDN Link -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script type="text/javascript">

        // Check if the screen size matches a mobile device
        var isMobile = window.matchMedia("(max-width: 767px)").matches;

        // Add class if it's a mobile device
        if (isMobile) {
            document.getElementById("sidebar-wrapper").classList.add("toggled");
        }
        const $button = document.querySelector('#sidebar-toggle');
        const $wrapper = document.querySelector('#wrapper');

        $button.addEventListener('click', (e) => {
            e.preventDefault();
            $wrapper.classList.toggle('toggled');
        });
        </script>

        <script type="text/javascript">

        $('.add').click(function () {
            var th = $(this).closest('.wrap').find('.count');
            th.val(+th.val() + 1);
        });

        $('.sub').click(function () {
            var th = $(this).closest('.wrap').find('.count');
            if (th.val() > 1) th.val(+th.val() - 1);
        });

       
        $(".sidebar-nav li").click(function (e) {
            $(".sidebar-nav li").removeClass("active");
            $(this).addClass("active");
        });
        
    </script>
    

    <script>
        document.getElementById("username").innerHTML = Logindata.user[0].first_name + " " + Logindata.user[0].sap_user_id;
        console.log("Logindata on master page----->", Logindata);
        if (!Logindata) {
            window.location.href = "Login";
        }
        var menu=[] ;
        console.log("Logindata.user[0].role_id)->>",Logindata.user[0].role_id);

        //var menuOptions = roles_menus[Logindata.user[0].role_id];
        var menuOptions = roles_menus[Logindata.user[0].role_id][0];

        $.each(menuOptions, function(key, value) {
            var $li = $("<li>");
            var $a = $("<a>").addClass("nav-link").attr({
                "asp-area": "",
                "asp-controller": "Home",
                "asp-action": key,
                "href": key,
            }).html(`<span class="material-symbols-rounded">content_paste_go</span><span>${value}</span>`);
            $li.append($a);
            $("#sidebar-nav").append($li);
        });
        var $li = $("<li>");
        $b = $("<a>").addClass("nav-link").attr({"onclick":"logout()"}).html(`<span class="material-symbols-rounded">logout</span><span>LogOut</span>`);
        $li.append($b);
        $("#sidebar-nav").append($li);

    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
